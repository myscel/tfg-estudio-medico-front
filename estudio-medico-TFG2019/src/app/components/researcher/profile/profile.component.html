<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab&display=swap" rel="stylesheet">
  <title>Estudio Médico</title>
</head>

<header>

    <div id="headerLeft">
        <img id="logo" src="../../../assets/img/logo.png" height="55">
        Estudio <strong>Médico</strong>
    </div>
    <div id="headerUserName">
        <span>
          Investigador
        </span>
        <span id="spanGrey">
          | {{userLogged.name}}
        </span>
    </div>
    <div id="headerRight">
        <div id="buttonProfile" class="btn btn-primary navButton" (click)="doProfile()">
            <div>PERFIL</div>
            <img class="imgMargin" src="../../../../assets/icons/profile.png" height="24">
        </div>
        <div id="buttonLogout" class="btn btn-primary navButton" (click)="doLogOut()">
            <div>DESCONECTAR</div>
            <img class="imgMargin" src="../../../../assets/icons/logout.png" height="24">
        </div>
    </div>


</header>

<body>

    <div id="navigationBar">
        <button id="buttonPacientes" class="btn btn-primary navButton" (click)="doHome()">PACIENTES</button>
        <button id="buttonCitas" class="btn btn-primary navButton">DOCUMENTACIÓN</button>
    </div>

    <div id="content">
        <div id="titleTableResearcher"><strong>INFORMACIÓN INVESTIGADOR</strong></div>

        <div id="boxGrey">
            <div id="divName">
               <div class="inlineBlock textInfo" >NOMBRE:</div>
               <div class="inlineBlock textData" >  {{this.userLogged.name}}</div>
            </div>
            <div id="divSurname">
                <div class="inlineBlock textInfo" >APELLIDOS:</div>
                <div class="inlineBlock textData" > {{this.userLogged.surname}}</div>
            </div>

        </div>
    </div>
    
    <button type="button" class="optButtonIz btn btn-primary" (click)="doHome()">
        Volver
        <img id="previous" src="../../../../assets/icons/previous.png" height="20">
    </button>
    <button type="button" class="optButton btn btn-warning" (click)="showUpdateBox()">
        Modificar contraseña
        <img id="previous" src="../../../../assets/icons/edit.png" height="20">
    </button>

    <div id="content" *ngIf='updatePass'>
    <div id="boxGreyPass">
        <form [formGroup]="updateForm" id="form" (ngSubmit)="doUpdate()">
                <div class="modify">
                        <div>
                        <div class="textInput">Contraseña antigua</div>
                        <input class="myInput form-control " [type]="!oldPassIsChecked ? 'password' : 'text'" formControlName="oldPassword">
                        </div>
        
                        <input class="myInputChangeViewPassword" type="checkbox" name="pass0" value="pass0" [(ngModel)]="oldPassIsChecked" (click)="changeShowOldPass()" [ngModelOptions]="{standalone: true}"> Mostrar contraseña<br>
             
                        <div class="gradientInput"></div>
                    </div>
            <div class="modify">
                <div>
                <div class="textInput">Nueva Contraseña </div>
                <input class="myInput form-control " [type]="!passIsChecked ? 'password' : 'text'" formControlName="password">
                </div>

                <input class="myInputChangeViewPassword" type="checkbox" name="pass1" value="pass1" [(ngModel)]="passIsChecked" (click)="changeShowPass()" [ngModelOptions]="{standalone: true}"> Mostrar contraseña<br>
     
                <div class="gradientInput"></div>
            </div>
            <div class="modify">
                <div>
                <div class="textInput">Repetir Contraseña </div>
                <input class="myInput form-control " [type]="!passRepeatIsChecked ? 'password' : 'text'" formControlName="repeatedPassword">
                </div>
                <input class="myInputChangeViewPassword" type="checkbox" name="pass2" value="pass2" [(ngModel)]="passRepeatIsChecked" (click)="changeShowPassRepeat()" [ngModelOptions]="{standalone: true}"> Mostrar contraseña<br>

         
                <div class="gradientInput"></div>
            </div>

            <div>
                <button id="buttonModify" type="button"  class="btn btn-primary" (click)="doUpdatePass()">Modificar</button>
            </div>
        </form>
    </div>
    </div>

    <div id="content" *ngIf='errorText'>
    <div id="modalError" class="errorModal alert alert-danger">
        <div class="textModal">
            <strong>Error! </strong> {{alertMessage}}
          </div>
    </div>
    </div>

    <div id="content" *ngIf='succesModal'>
    <div id="modalWarningSave" class="warningModal alert alert-warning" >
            <strong>Aviso! </strong> ¿Desea guardar los cambios definitivamente?
            <div>
              <div>
                  <button type="button" (click)="doUpdate()" class="buttonSucces btn btn-success">SÍ</button>
                  <button type="button" (click)="setInvisibleModal()" class="buttonExit btn btn-danger">NO</button>
              </div>
            </div>   
        </div>
    </div>

    <div id="content" *ngIf='updatedModal'>
        <div id="modalSucces" class="errorModal alert alert-warning" >
            <div class="textModal">
                <strong>Exito! </strong> {{alertMessage}}
            </div>
        </div>
    </div>

</body>
